{
  "openapi": "3.0.3",
  "info": {
    "title": "Task Tracker API",
    "version": "1.0.0",
    "description": "OpenAPI definition for the Task Tracker backend. Schemas are derived from the runtime Zod validators to stay in sync with request and response types."
  },
  "servers": [
    {
      "url": "http://localhost:3001",
      "description": "Local development"
    }
  ],
  "tags": [
    {
      "name": "Users"
    },
    {
      "name": "Tasks"
    },
    {
      "name": "Campaigns"
    },
    {
      "name": "RPG"
    },
    {
      "name": "Debug"
    }
  ],
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      }
    },
    "schemas": {
      "ErrorResponse": {
        "type": "object",
        "properties": {
          "error": {
            "type": "string"
          }
        },
        "required": [
          "error"
        ],
        "additionalProperties": false
      },
      "PublicUser": {
        "type": "object",
        "properties": {
          "id": {
            "type": "number"
          },
          "username": {
            "type": "string"
          },
          "email": {
            "type": "string",
            "nullable": true
          },
          "created_at": {
            "type": "string"
          },
          "updated_at": {
            "type": "string"
          },
          "profile": {
            "type": "object",
            "properties": {
              "display_name": {
                "type": "string"
              },
              "avatar": {
                "type": "string",
                "nullable": true
              },
              "class": {
                "type": "string",
                "enum": [
                  "adventurer",
                  "warrior",
                  "mage",
                  "rogue"
                ]
              },
              "bio": {
                "type": "string"
              },
              "prefs": {
                "type": "object",
                "additionalProperties": {}
              }
            },
            "required": [
              "display_name",
              "avatar"
            ],
            "additionalProperties": false
          },
          "rpg": {
            "type": "object",
            "properties": {
              "level": {
                "type": "number"
              },
              "xp": {
                "type": "number"
              },
              "xp_into_level": {
                "type": "number"
              },
              "xp_for_level": {
                "type": "number"
              },
              "xp_to_next": {
                "type": "number"
              },
              "xp_progress": {
                "type": "number"
              },
              "streak": {
                "type": "number"
              },
              "last_daily_reward_at": {
                "type": "string",
                "nullable": true
              },
              "last_xp_award_at": {
                "type": "string",
                "nullable": true
              },
              "counters": {
                "type": "object",
                "additionalProperties": {
                  "type": "number"
                }
              },
              "stats": {
                "type": "object",
                "properties": {
                  "hp": {
                    "type": "number"
                  },
                  "mp": {
                    "type": "number"
                  },
                  "coins": {
                    "type": "number"
                  }
                },
                "required": [
                  "hp",
                  "mp",
                  "coins"
                ],
                "additionalProperties": false
              },
              "achievements": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "title": {
                      "type": "string"
                    },
                    "description": {
                      "type": "string"
                    },
                    "unlocked_at": {
                      "type": "string"
                    },
                    "points": {
                      "type": "number"
                    },
                    "tags": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    }
                  },
                  "required": [
                    "title"
                  ],
                  "additionalProperties": false
                }
              },
              "inventory": {
                "type": "object",
                "properties": {
                  "items": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string"
                        },
                        "description": {
                          "type": "string"
                        },
                        "quantity": {
                          "type": "number"
                        },
                        "rarity": {
                          "type": "string",
                          "enum": [
                            "common",
                            "uncommon",
                            "rare",
                            "epic",
                            "legendary",
                            "mythic"
                          ]
                        },
                        "acquired_at": {
                          "type": "string"
                        },
                        "equipped": {
                          "type": "boolean"
                        },
                        "tags": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        }
                      },
                      "required": [
                        "name"
                      ],
                      "additionalProperties": false
                    }
                  }
                },
                "required": [
                  "items"
                ],
                "additionalProperties": false
              },
              "recent_events": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "amount": {
                      "type": "number"
                    },
                    "reason": {
                      "type": "string",
                      "enum": [
                        "task_complete",
                        "subtask_complete",
                        "daily_focus",
                        "debug_adjustment",
                        "xp_gain",
                        "legacy"
                      ]
                    },
                    "message": {
                      "type": "string"
                    },
                    "metadata": {
                      "type": "object",
                      "additionalProperties": {
                        "oneOf": [
                          {
                            "type": "string"
                          },
                          {
                            "type": "number"
                          },
                          {
                            "type": "boolean"
                          }
                        ],
                        "nullable": true
                      }
                    },
                    "at": {
                      "type": "string"
                    },
                    "level_before": {
                      "type": "number"
                    },
                    "level_after": {
                      "type": "number"
                    },
                    "xp_before": {
                      "type": "number"
                    },
                    "xp_after": {
                      "type": "number"
                    },
                    "xp_into_level": {
                      "type": "number"
                    },
                    "xp_for_level": {
                      "type": "number"
                    },
                    "xp_to_next": {
                      "type": "number"
                    },
                    "leveled_up": {
                      "type": "boolean"
                    }
                  },
                  "required": [
                    "amount",
                    "reason",
                    "message",
                    "metadata",
                    "at",
                    "level_before",
                    "level_after",
                    "xp_before",
                    "xp_after",
                    "xp_into_level",
                    "xp_for_level",
                    "xp_to_next",
                    "leveled_up"
                  ],
                  "additionalProperties": false
                }
              }
            },
            "required": [
              "level",
              "xp",
              "xp_into_level",
              "xp_for_level",
              "xp_to_next",
              "xp_progress",
              "streak",
              "last_daily_reward_at",
              "last_xp_award_at",
              "counters",
              "stats",
              "achievements",
              "inventory",
              "recent_events"
            ],
            "additionalProperties": false
          }
        },
        "required": [
          "id",
          "username",
          "email",
          "created_at",
          "updated_at",
          "profile",
          "rpg"
        ],
        "additionalProperties": false
      },
      "PublicUserRpgState": {
        "type": "object",
        "properties": {
          "level": {
            "type": "number"
          },
          "xp": {
            "type": "number"
          },
          "xp_into_level": {
            "type": "number"
          },
          "xp_for_level": {
            "type": "number"
          },
          "xp_to_next": {
            "type": "number"
          },
          "xp_progress": {
            "type": "number"
          },
          "streak": {
            "type": "number"
          },
          "last_daily_reward_at": {
            "type": "string",
            "nullable": true
          },
          "last_xp_award_at": {
            "type": "string",
            "nullable": true
          },
          "counters": {
            "type": "object",
            "additionalProperties": {
              "type": "number"
            }
          },
          "stats": {
            "type": "object",
            "properties": {
              "hp": {
                "type": "number"
              },
              "mp": {
                "type": "number"
              },
              "coins": {
                "type": "number"
              }
            },
            "required": [
              "hp",
              "mp",
              "coins"
            ],
            "additionalProperties": false
          },
          "achievements": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "id": {
                  "type": "string"
                },
                "title": {
                  "type": "string"
                },
                "description": {
                  "type": "string"
                },
                "unlocked_at": {
                  "type": "string"
                },
                "points": {
                  "type": "number"
                },
                "tags": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              },
              "required": [
                "title"
              ],
              "additionalProperties": false
            }
          },
          "inventory": {
            "type": "object",
            "properties": {
              "items": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "name": {
                      "type": "string"
                    },
                    "description": {
                      "type": "string"
                    },
                    "quantity": {
                      "type": "number"
                    },
                    "rarity": {
                      "type": "string",
                      "enum": [
                        "common",
                        "uncommon",
                        "rare",
                        "epic",
                        "legendary",
                        "mythic"
                      ]
                    },
                    "acquired_at": {
                      "type": "string"
                    },
                    "equipped": {
                      "type": "boolean"
                    },
                    "tags": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    }
                  },
                  "required": [
                    "name"
                  ],
                  "additionalProperties": false
                }
              }
            },
            "required": [
              "items"
            ],
            "additionalProperties": false
          },
          "recent_events": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "amount": {
                  "type": "number"
                },
                "reason": {
                  "type": "string",
                  "enum": [
                    "task_complete",
                    "subtask_complete",
                    "daily_focus",
                    "debug_adjustment",
                    "xp_gain",
                    "legacy"
                  ]
                },
                "message": {
                  "type": "string"
                },
                "metadata": {
                  "type": "object",
                  "additionalProperties": {
                    "oneOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "number"
                      },
                      {
                        "type": "boolean"
                      }
                    ],
                    "nullable": true
                  }
                },
                "at": {
                  "type": "string"
                },
                "level_before": {
                  "type": "number"
                },
                "level_after": {
                  "type": "number"
                },
                "xp_before": {
                  "type": "number"
                },
                "xp_after": {
                  "type": "number"
                },
                "xp_into_level": {
                  "type": "number"
                },
                "xp_for_level": {
                  "type": "number"
                },
                "xp_to_next": {
                  "type": "number"
                },
                "leveled_up": {
                  "type": "boolean"
                }
              },
              "required": [
                "amount",
                "reason",
                "message",
                "metadata",
                "at",
                "level_before",
                "level_after",
                "xp_before",
                "xp_after",
                "xp_into_level",
                "xp_for_level",
                "xp_to_next",
                "leveled_up"
              ],
              "additionalProperties": false
            }
          }
        },
        "required": [
          "level",
          "xp",
          "xp_into_level",
          "xp_for_level",
          "xp_to_next",
          "xp_progress",
          "streak",
          "last_daily_reward_at",
          "last_xp_award_at",
          "counters",
          "stats",
          "achievements",
          "inventory",
          "recent_events"
        ],
        "additionalProperties": false
      },
      "AuthSuccessResponse": {
        "type": "object",
        "properties": {
          "token": {
            "type": "string"
          },
          "user": {
            "type": "object",
            "properties": {
              "id": {
                "type": "number"
              },
              "username": {
                "type": "string"
              },
              "email": {
                "type": "string",
                "nullable": true
              },
              "created_at": {
                "type": "string"
              },
              "updated_at": {
                "type": "string"
              },
              "profile": {
                "type": "object",
                "properties": {
                  "display_name": {
                    "type": "string"
                  },
                  "avatar": {
                    "type": "string",
                    "nullable": true
                  },
                  "class": {
                    "type": "string",
                    "enum": [
                      "adventurer",
                      "warrior",
                      "mage",
                      "rogue"
                    ]
                  },
                  "bio": {
                    "type": "string"
                  },
                  "prefs": {
                    "type": "object",
                    "additionalProperties": {}
                  }
                },
                "required": [
                  "display_name",
                  "avatar"
                ],
                "additionalProperties": false
              },
              "rpg": {
                "type": "object",
                "properties": {
                  "level": {
                    "type": "number"
                  },
                  "xp": {
                    "type": "number"
                  },
                  "xp_into_level": {
                    "type": "number"
                  },
                  "xp_for_level": {
                    "type": "number"
                  },
                  "xp_to_next": {
                    "type": "number"
                  },
                  "xp_progress": {
                    "type": "number"
                  },
                  "streak": {
                    "type": "number"
                  },
                  "last_daily_reward_at": {
                    "type": "string",
                    "nullable": true
                  },
                  "last_xp_award_at": {
                    "type": "string",
                    "nullable": true
                  },
                  "counters": {
                    "type": "object",
                    "additionalProperties": {
                      "type": "number"
                    }
                  },
                  "stats": {
                    "type": "object",
                    "properties": {
                      "hp": {
                        "type": "number"
                      },
                      "mp": {
                        "type": "number"
                      },
                      "coins": {
                        "type": "number"
                      }
                    },
                    "required": [
                      "hp",
                      "mp",
                      "coins"
                    ],
                    "additionalProperties": false
                  },
                  "achievements": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "title": {
                          "type": "string"
                        },
                        "description": {
                          "type": "string"
                        },
                        "unlocked_at": {
                          "type": "string"
                        },
                        "points": {
                          "type": "number"
                        },
                        "tags": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        }
                      },
                      "required": [
                        "title"
                      ],
                      "additionalProperties": false
                    }
                  },
                  "inventory": {
                    "type": "object",
                    "properties": {
                      "items": {
                        "type": "array",
                        "items": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string"
                            },
                            "name": {
                              "type": "string"
                            },
                            "description": {
                              "type": "string"
                            },
                            "quantity": {
                              "type": "number"
                            },
                            "rarity": {
                              "type": "string",
                              "enum": [
                                "common",
                                "uncommon",
                                "rare",
                                "epic",
                                "legendary",
                                "mythic"
                              ]
                            },
                            "acquired_at": {
                              "type": "string"
                            },
                            "equipped": {
                              "type": "boolean"
                            },
                            "tags": {
                              "type": "array",
                              "items": {
                                "type": "string"
                              }
                            }
                          },
                          "required": [
                            "name"
                          ],
                          "additionalProperties": false
                        }
                      }
                    },
                    "required": [
                      "items"
                    ],
                    "additionalProperties": false
                  },
                  "recent_events": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "amount": {
                          "type": "number"
                        },
                        "reason": {
                          "type": "string",
                          "enum": [
                            "task_complete",
                            "subtask_complete",
                            "daily_focus",
                            "debug_adjustment",
                            "xp_gain",
                            "legacy"
                          ]
                        },
                        "message": {
                          "type": "string"
                        },
                        "metadata": {
                          "type": "object",
                          "additionalProperties": {
                            "oneOf": [
                              {
                                "type": "string"
                              },
                              {
                                "type": "number"
                              },
                              {
                                "type": "boolean"
                              }
                            ],
                            "nullable": true
                          }
                        },
                        "at": {
                          "type": "string"
                        },
                        "level_before": {
                          "type": "number"
                        },
                        "level_after": {
                          "type": "number"
                        },
                        "xp_before": {
                          "type": "number"
                        },
                        "xp_after": {
                          "type": "number"
                        },
                        "xp_into_level": {
                          "type": "number"
                        },
                        "xp_for_level": {
                          "type": "number"
                        },
                        "xp_to_next": {
                          "type": "number"
                        },
                        "leveled_up": {
                          "type": "boolean"
                        }
                      },
                      "required": [
                        "amount",
                        "reason",
                        "message",
                        "metadata",
                        "at",
                        "level_before",
                        "level_after",
                        "xp_before",
                        "xp_after",
                        "xp_into_level",
                        "xp_for_level",
                        "xp_to_next",
                        "leveled_up"
                      ],
                      "additionalProperties": false
                    }
                  }
                },
                "required": [
                  "level",
                  "xp",
                  "xp_into_level",
                  "xp_for_level",
                  "xp_to_next",
                  "xp_progress",
                  "streak",
                  "last_daily_reward_at",
                  "last_xp_award_at",
                  "counters",
                  "stats",
                  "achievements",
                  "inventory",
                  "recent_events"
                ],
                "additionalProperties": false
              }
            },
            "required": [
              "id",
              "username",
              "email",
              "created_at",
              "updated_at",
              "profile",
              "rpg"
            ],
            "additionalProperties": false
          }
        },
        "required": [
          "token",
          "user"
        ],
        "additionalProperties": false
      },
      "CurrentUserResponse": {
        "type": "object",
        "properties": {
          "user": {
            "type": "object",
            "properties": {
              "id": {
                "type": "number"
              },
              "username": {
                "type": "string"
              },
              "email": {
                "type": "string",
                "nullable": true
              },
              "created_at": {
                "type": "string"
              },
              "updated_at": {
                "type": "string"
              },
              "profile": {
                "type": "object",
                "properties": {
                  "display_name": {
                    "type": "string"
                  },
                  "avatar": {
                    "type": "string",
                    "nullable": true
                  },
                  "class": {
                    "type": "string",
                    "enum": [
                      "adventurer",
                      "warrior",
                      "mage",
                      "rogue"
                    ]
                  },
                  "bio": {
                    "type": "string"
                  },
                  "prefs": {
                    "type": "object",
                    "additionalProperties": {}
                  }
                },
                "required": [
                  "display_name",
                  "avatar"
                ],
                "additionalProperties": false
              },
              "rpg": {
                "type": "object",
                "properties": {
                  "level": {
                    "type": "number"
                  },
                  "xp": {
                    "type": "number"
                  },
                  "xp_into_level": {
                    "type": "number"
                  },
                  "xp_for_level": {
                    "type": "number"
                  },
                  "xp_to_next": {
                    "type": "number"
                  },
                  "xp_progress": {
                    "type": "number"
                  },
                  "streak": {
                    "type": "number"
                  },
                  "last_daily_reward_at": {
                    "type": "string",
                    "nullable": true
                  },
                  "last_xp_award_at": {
                    "type": "string",
                    "nullable": true
                  },
                  "counters": {
                    "type": "object",
                    "additionalProperties": {
                      "type": "number"
                    }
                  },
                  "stats": {
                    "type": "object",
                    "properties": {
                      "hp": {
                        "type": "number"
                      },
                      "mp": {
                        "type": "number"
                      },
                      "coins": {
                        "type": "number"
                      }
                    },
                    "required": [
                      "hp",
                      "mp",
                      "coins"
                    ],
                    "additionalProperties": false
                  },
                  "achievements": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "title": {
                          "type": "string"
                        },
                        "description": {
                          "type": "string"
                        },
                        "unlocked_at": {
                          "type": "string"
                        },
                        "points": {
                          "type": "number"
                        },
                        "tags": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        }
                      },
                      "required": [
                        "title"
                      ],
                      "additionalProperties": false
                    }
                  },
                  "inventory": {
                    "type": "object",
                    "properties": {
                      "items": {
                        "type": "array",
                        "items": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string"
                            },
                            "name": {
                              "type": "string"
                            },
                            "description": {
                              "type": "string"
                            },
                            "quantity": {
                              "type": "number"
                            },
                            "rarity": {
                              "type": "string",
                              "enum": [
                                "common",
                                "uncommon",
                                "rare",
                                "epic",
                                "legendary",
                                "mythic"
                              ]
                            },
                            "acquired_at": {
                              "type": "string"
                            },
                            "equipped": {
                              "type": "boolean"
                            },
                            "tags": {
                              "type": "array",
                              "items": {
                                "type": "string"
                              }
                            }
                          },
                          "required": [
                            "name"
                          ],
                          "additionalProperties": false
                        }
                      }
                    },
                    "required": [
                      "items"
                    ],
                    "additionalProperties": false
                  },
                  "recent_events": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "amount": {
                          "type": "number"
                        },
                        "reason": {
                          "type": "string",
                          "enum": [
                            "task_complete",
                            "subtask_complete",
                            "daily_focus",
                            "debug_adjustment",
                            "xp_gain",
                            "legacy"
                          ]
                        },
                        "message": {
                          "type": "string"
                        },
                        "metadata": {
                          "type": "object",
                          "additionalProperties": {
                            "oneOf": [
                              {
                                "type": "string"
                              },
                              {
                                "type": "number"
                              },
                              {
                                "type": "boolean"
                              }
                            ],
                            "nullable": true
                          }
                        },
                        "at": {
                          "type": "string"
                        },
                        "level_before": {
                          "type": "number"
                        },
                        "level_after": {
                          "type": "number"
                        },
                        "xp_before": {
                          "type": "number"
                        },
                        "xp_after": {
                          "type": "number"
                        },
                        "xp_into_level": {
                          "type": "number"
                        },
                        "xp_for_level": {
                          "type": "number"
                        },
                        "xp_to_next": {
                          "type": "number"
                        },
                        "leveled_up": {
                          "type": "boolean"
                        }
                      },
                      "required": [
                        "amount",
                        "reason",
                        "message",
                        "metadata",
                        "at",
                        "level_before",
                        "level_after",
                        "xp_before",
                        "xp_after",
                        "xp_into_level",
                        "xp_for_level",
                        "xp_to_next",
                        "leveled_up"
                      ],
                      "additionalProperties": false
                    }
                  }
                },
                "required": [
                  "level",
                  "xp",
                  "xp_into_level",
                  "xp_for_level",
                  "xp_to_next",
                  "xp_progress",
                  "streak",
                  "last_daily_reward_at",
                  "last_xp_award_at",
                  "counters",
                  "stats",
                  "achievements",
                  "inventory",
                  "recent_events"
                ],
                "additionalProperties": false
              }
            },
            "required": [
              "id",
              "username",
              "email",
              "created_at",
              "updated_at",
              "profile",
              "rpg"
            ],
            "additionalProperties": false
          }
        },
        "required": [
          "user"
        ],
        "additionalProperties": false
      },
      "UsernameAvailabilityResponse": {
        "type": "object",
        "properties": {
          "available": {
            "type": "boolean"
          },
          "reserved": {
            "type": "boolean"
          },
          "suggestions": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "required": [
          "available"
        ],
        "additionalProperties": false
      },
      "EmailValidationResponse": {
        "type": "object",
        "properties": {
          "valid": {
            "type": "boolean"
          },
          "normalized_email": {
            "type": "string"
          },
          "reason": {
            "type": "string"
          }
        },
        "required": [
          "valid",
          "normalized_email"
        ],
        "additionalProperties": false
      },
      "Task": {
        "type": "object",
        "properties": {
          "id": {
            "type": "number"
          },
          "description": {
            "type": "string"
          },
          "priority": {
            "type": "string",
            "enum": [
              "low",
              "medium",
              "high"
            ]
          },
          "sub_tasks": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "id": {
                  "type": "number"
                },
                "description": {
                  "type": "string"
                },
                "status": {
                  "type": "string",
                  "enum": [
                    "todo",
                    "in_progress",
                    "blocked",
                    "done"
                  ]
                },
                "created_at": {
                  "type": "string"
                },
                "updated_at": {
                  "type": "string"
                },
                "status_history": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "status": {
                        "type": "string",
                        "enum": [
                          "todo",
                          "in_progress",
                          "blocked",
                          "done"
                        ]
                      },
                      "at": {
                        "type": "string"
                      },
                      "note": {
                        "type": "string",
                        "nullable": true
                      }
                    },
                    "required": [
                      "status",
                      "at",
                      "note"
                    ],
                    "additionalProperties": false
                  }
                },
                "completed": {
                  "type": "boolean"
                },
                "rpg": {
                  "type": "object",
                  "properties": {
                    "xp_awarded": {
                      "type": "boolean"
                    },
                    "last_reward_at": {
                      "type": "string",
                      "nullable": true
                    }
                  },
                  "required": [
                    "xp_awarded",
                    "last_reward_at"
                  ],
                  "additionalProperties": false
                },
                "priority": {
                  "type": "string",
                  "enum": [
                    "low",
                    "medium",
                    "high"
                  ]
                },
                "weight": {
                  "type": "number"
                }
              },
              "required": [
                "id",
                "description",
                "status",
                "created_at",
                "updated_at",
                "status_history",
                "rpg"
              ],
              "additionalProperties": false
            }
          },
          "side_quests": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "id": {
                  "type": "number"
                },
                "description": {
                  "type": "string"
                },
                "status": {
                  "type": "string",
                  "enum": [
                    "todo",
                    "in_progress",
                    "blocked",
                    "done"
                  ]
                },
                "created_at": {
                  "type": "string"
                },
                "updated_at": {
                  "type": "string"
                },
                "status_history": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "status": {
                        "type": "string",
                        "enum": [
                          "todo",
                          "in_progress",
                          "blocked",
                          "done"
                        ]
                      },
                      "at": {
                        "type": "string"
                      },
                      "note": {
                        "type": "string",
                        "nullable": true
                      }
                    },
                    "required": [
                      "status",
                      "at",
                      "note"
                    ],
                    "additionalProperties": false
                  }
                },
                "completed": {
                  "type": "boolean"
                },
                "rpg": {
                  "type": "object",
                  "properties": {
                    "xp_awarded": {
                      "type": "boolean"
                    },
                    "last_reward_at": {
                      "type": "string",
                      "nullable": true
                    }
                  },
                  "required": [
                    "xp_awarded",
                    "last_reward_at"
                  ],
                  "additionalProperties": false
                },
                "priority": {
                  "type": "string",
                  "enum": [
                    "low",
                    "medium",
                    "high"
                  ]
                },
                "weight": {
                  "type": "number"
                }
              },
              "required": [
                "id",
                "description",
                "status",
                "created_at",
                "updated_at",
                "status_history",
                "rpg"
              ],
              "additionalProperties": false
            }
          },
          "nextSubtaskId": {
            "type": "number"
          },
          "due_date": {
            "type": "string"
          },
          "status": {
            "type": "string",
            "enum": [
              "todo",
              "in_progress",
              "blocked",
              "done"
            ]
          },
          "order": {
            "type": "number"
          },
          "created_at": {
            "type": "string"
          },
          "updated_at": {
            "type": "string"
          },
          "completed": {
            "type": "boolean"
          },
          "task_level": {
            "type": "number"
          },
          "status_history": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "enum": [
                    "todo",
                    "in_progress",
                    "blocked",
                    "done"
                  ]
                },
                "at": {
                  "type": "string"
                },
                "note": {
                  "type": "string",
                  "nullable": true
                }
              },
              "required": [
                "status",
                "at",
                "note"
              ],
              "additionalProperties": false
            }
          },
          "rpg": {
            "type": "object",
            "properties": {
              "xp_awarded": {
                "type": "boolean"
              },
              "last_reward_at": {
                "type": "string",
                "nullable": true
              },
              "history": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "at": {
                      "type": "string"
                    },
                    "amount": {
                      "type": "number"
                    },
                    "reason": {
                      "type": "string"
                    },
                    "subtask_id": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "at",
                    "amount",
                    "reason"
                  ],
                  "additionalProperties": false
                }
              }
            },
            "required": [
              "xp_awarded",
              "last_reward_at",
              "history"
            ],
            "additionalProperties": false
          },
          "campaign_id": {
            "type": "number",
            "nullable": true
          },
          "owner_id": {
            "type": "number"
          },
          "nextId": {
            "type": "number"
          }
        },
        "required": [
          "id",
          "description",
          "priority",
          "sub_tasks",
          "side_quests",
          "nextSubtaskId",
          "due_date",
          "status",
          "order",
          "created_at",
          "updated_at",
          "task_level",
          "status_history",
          "rpg",
          "campaign_id",
          "owner_id"
        ],
        "additionalProperties": false
      },
      "TaskWithProgress": {
        "type": "object",
        "properties": {
          "id": {
            "type": "number"
          },
          "description": {
            "type": "string"
          },
          "priority": {
            "type": "string",
            "enum": [
              "low",
              "medium",
              "high"
            ]
          },
          "sub_tasks": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "id": {
                  "type": "number"
                },
                "description": {
                  "type": "string"
                },
                "status": {
                  "type": "string",
                  "enum": [
                    "todo",
                    "in_progress",
                    "blocked",
                    "done"
                  ]
                },
                "created_at": {
                  "type": "string"
                },
                "updated_at": {
                  "type": "string"
                },
                "status_history": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "status": {
                        "type": "string",
                        "enum": [
                          "todo",
                          "in_progress",
                          "blocked",
                          "done"
                        ]
                      },
                      "at": {
                        "type": "string"
                      },
                      "note": {
                        "type": "string",
                        "nullable": true
                      }
                    },
                    "required": [
                      "status",
                      "at",
                      "note"
                    ],
                    "additionalProperties": false
                  }
                },
                "completed": {
                  "type": "boolean"
                },
                "rpg": {
                  "type": "object",
                  "properties": {
                    "xp_awarded": {
                      "type": "boolean"
                    },
                    "last_reward_at": {
                      "type": "string",
                      "nullable": true
                    }
                  },
                  "required": [
                    "xp_awarded",
                    "last_reward_at"
                  ],
                  "additionalProperties": false
                },
                "priority": {
                  "type": "string",
                  "enum": [
                    "low",
                    "medium",
                    "high"
                  ]
                },
                "weight": {
                  "type": "number"
                }
              },
              "required": [
                "id",
                "description",
                "status",
                "created_at",
                "updated_at",
                "status_history",
                "rpg"
              ],
              "additionalProperties": false
            }
          },
          "side_quests": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "id": {
                  "type": "number"
                },
                "description": {
                  "type": "string"
                },
                "status": {
                  "type": "string",
                  "enum": [
                    "todo",
                    "in_progress",
                    "blocked",
                    "done"
                  ]
                },
                "created_at": {
                  "type": "string"
                },
                "updated_at": {
                  "type": "string"
                },
                "status_history": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "status": {
                        "type": "string",
                        "enum": [
                          "todo",
                          "in_progress",
                          "blocked",
                          "done"
                        ]
                      },
                      "at": {
                        "type": "string"
                      },
                      "note": {
                        "type": "string",
                        "nullable": true
                      }
                    },
                    "required": [
                      "status",
                      "at",
                      "note"
                    ],
                    "additionalProperties": false
                  }
                },
                "completed": {
                  "type": "boolean"
                },
                "rpg": {
                  "type": "object",
                  "properties": {
                    "xp_awarded": {
                      "type": "boolean"
                    },
                    "last_reward_at": {
                      "type": "string",
                      "nullable": true
                    }
                  },
                  "required": [
                    "xp_awarded",
                    "last_reward_at"
                  ],
                  "additionalProperties": false
                },
                "priority": {
                  "type": "string",
                  "enum": [
                    "low",
                    "medium",
                    "high"
                  ]
                },
                "weight": {
                  "type": "number"
                }
              },
              "required": [
                "id",
                "description",
                "status",
                "created_at",
                "updated_at",
                "status_history",
                "rpg"
              ],
              "additionalProperties": false
            }
          },
          "nextSubtaskId": {
            "type": "number"
          },
          "due_date": {
            "type": "string"
          },
          "status": {
            "type": "string",
            "enum": [
              "todo",
              "in_progress",
              "blocked",
              "done"
            ]
          },
          "order": {
            "type": "number"
          },
          "created_at": {
            "type": "string"
          },
          "updated_at": {
            "type": "string"
          },
          "completed": {
            "type": "boolean"
          },
          "task_level": {
            "type": "number"
          },
          "status_history": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "enum": [
                    "todo",
                    "in_progress",
                    "blocked",
                    "done"
                  ]
                },
                "at": {
                  "type": "string"
                },
                "note": {
                  "type": "string",
                  "nullable": true
                }
              },
              "required": [
                "status",
                "at",
                "note"
              ],
              "additionalProperties": false
            }
          },
          "rpg": {
            "type": "object",
            "properties": {
              "xp_awarded": {
                "type": "boolean"
              },
              "last_reward_at": {
                "type": "string",
                "nullable": true
              },
              "history": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "at": {
                      "type": "string"
                    },
                    "amount": {
                      "type": "number"
                    },
                    "reason": {
                      "type": "string"
                    },
                    "subtask_id": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "at",
                    "amount",
                    "reason"
                  ],
                  "additionalProperties": false
                }
              }
            },
            "required": [
              "xp_awarded",
              "last_reward_at",
              "history"
            ],
            "additionalProperties": false
          },
          "campaign_id": {
            "type": "number",
            "nullable": true
          },
          "owner_id": {
            "type": "number"
          },
          "nextId": {
            "type": "number"
          },
          "xp_events": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "amount": {
                  "type": "number"
                },
                "reason": {
                  "type": "string",
                  "enum": [
                    "task_complete",
                    "subtask_complete",
                    "daily_focus",
                    "debug_adjustment",
                    "xp_gain",
                    "legacy"
                  ]
                },
                "message": {
                  "type": "string"
                },
                "metadata": {
                  "type": "object",
                  "additionalProperties": {
                    "oneOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "number"
                      },
                      {
                        "type": "boolean"
                      }
                    ],
                    "nullable": true
                  }
                },
                "at": {
                  "type": "string"
                },
                "level_before": {
                  "type": "number"
                },
                "level_after": {
                  "type": "number"
                },
                "xp_after": {
                  "type": "number"
                },
                "xp_into_level": {
                  "type": "number"
                },
                "xp_for_level": {
                  "type": "number"
                },
                "xp_to_next": {
                  "type": "number"
                },
                "leveled_up": {
                  "type": "boolean"
                }
              },
              "required": [
                "amount",
                "reason",
                "message",
                "metadata",
                "at",
                "level_before",
                "level_after",
                "xp_after",
                "xp_into_level",
                "xp_for_level",
                "xp_to_next",
                "leveled_up"
              ],
              "additionalProperties": false
            }
          },
          "player_rpg": {
            "type": "object",
            "properties": {
              "level": {
                "type": "number"
              },
              "xp": {
                "type": "number"
              },
              "xp_into_level": {
                "type": "number"
              },
              "xp_for_level": {
                "type": "number"
              },
              "xp_to_next": {
                "type": "number"
              },
              "xp_progress": {
                "type": "number"
              },
              "streak": {
                "type": "number"
              },
              "last_daily_reward_at": {
                "type": "string",
                "nullable": true
              },
              "last_xp_award_at": {
                "type": "string",
                "nullable": true
              },
              "counters": {
                "type": "object",
                "additionalProperties": {
                  "type": "number"
                }
              },
              "stats": {
                "type": "object",
                "properties": {
                  "hp": {
                    "type": "number"
                  },
                  "mp": {
                    "type": "number"
                  },
                  "coins": {
                    "type": "number"
                  }
                },
                "required": [
                  "hp",
                  "mp",
                  "coins"
                ],
                "additionalProperties": false
              },
              "achievements": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "title": {
                      "type": "string"
                    },
                    "description": {
                      "type": "string"
                    },
                    "unlocked_at": {
                      "type": "string"
                    },
                    "points": {
                      "type": "number"
                    },
                    "tags": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    }
                  },
                  "required": [
                    "title"
                  ],
                  "additionalProperties": false
                }
              },
              "inventory": {
                "type": "object",
                "properties": {
                  "items": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string"
                        },
                        "description": {
                          "type": "string"
                        },
                        "quantity": {
                          "type": "number"
                        },
                        "rarity": {
                          "type": "string",
                          "enum": [
                            "common",
                            "uncommon",
                            "rare",
                            "epic",
                            "legendary",
                            "mythic"
                          ]
                        },
                        "acquired_at": {
                          "type": "string"
                        },
                        "equipped": {
                          "type": "boolean"
                        },
                        "tags": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        }
                      },
                      "required": [
                        "name"
                      ],
                      "additionalProperties": false
                    }
                  }
                },
                "required": [
                  "items"
                ],
                "additionalProperties": false
              },
              "recent_events": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "amount": {
                      "type": "number"
                    },
                    "reason": {
                      "type": "string",
                      "enum": [
                        "task_complete",
                        "subtask_complete",
                        "daily_focus",
                        "debug_adjustment",
                        "xp_gain",
                        "legacy"
                      ]
                    },
                    "message": {
                      "type": "string"
                    },
                    "metadata": {
                      "type": "object",
                      "additionalProperties": {
                        "oneOf": [
                          {
                            "type": "string"
                          },
                          {
                            "type": "number"
                          },
                          {
                            "type": "boolean"
                          }
                        ],
                        "nullable": true
                      }
                    },
                    "at": {
                      "type": "string"
                    },
                    "level_before": {
                      "type": "number"
                    },
                    "level_after": {
                      "type": "number"
                    },
                    "xp_before": {
                      "type": "number"
                    },
                    "xp_after": {
                      "type": "number"
                    },
                    "xp_into_level": {
                      "type": "number"
                    },
                    "xp_for_level": {
                      "type": "number"
                    },
                    "xp_to_next": {
                      "type": "number"
                    },
                    "leveled_up": {
                      "type": "boolean"
                    }
                  },
                  "required": [
                    "amount",
                    "reason",
                    "message",
                    "metadata",
                    "at",
                    "level_before",
                    "level_after",
                    "xp_before",
                    "xp_after",
                    "xp_into_level",
                    "xp_for_level",
                    "xp_to_next",
                    "leveled_up"
                  ],
                  "additionalProperties": false
                }
              }
            },
            "required": [
              "level",
              "xp",
              "xp_into_level",
              "xp_for_level",
              "xp_to_next",
              "xp_progress",
              "streak",
              "last_daily_reward_at",
              "last_xp_award_at",
              "counters",
              "stats",
              "achievements",
              "inventory",
              "recent_events"
            ],
            "additionalProperties": false,
            "nullable": true
          }
        },
        "required": [
          "id",
          "description",
          "priority",
          "sub_tasks",
          "side_quests",
          "nextSubtaskId",
          "due_date",
          "status",
          "order",
          "created_at",
          "updated_at",
          "task_level",
          "status_history",
          "rpg",
          "campaign_id",
          "owner_id"
        ],
        "additionalProperties": false
      },
      "TaskListResponse": {
        "type": "object",
        "properties": {
          "tasks": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "id": {
                  "type": "number"
                },
                "description": {
                  "type": "string"
                },
                "priority": {
                  "type": "string",
                  "enum": [
                    "low",
                    "medium",
                    "high"
                  ]
                },
                "sub_tasks": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "number"
                      },
                      "description": {
                        "type": "string"
                      },
                      "status": {
                        "type": "string",
                        "enum": [
                          "todo",
                          "in_progress",
                          "blocked",
                          "done"
                        ]
                      },
                      "created_at": {
                        "type": "string"
                      },
                      "updated_at": {
                        "type": "string"
                      },
                      "status_history": {
                        "type": "array",
                        "items": {
                          "type": "object",
                          "properties": {
                            "status": {
                              "type": "string",
                              "enum": [
                                "todo",
                                "in_progress",
                                "blocked",
                                "done"
                              ]
                            },
                            "at": {
                              "type": "string"
                            },
                            "note": {
                              "type": "string",
                              "nullable": true
                            }
                          },
                          "required": [
                            "status",
                            "at",
                            "note"
                          ],
                          "additionalProperties": false
                        }
                      },
                      "completed": {
                        "type": "boolean"
                      },
                      "rpg": {
                        "type": "object",
                        "properties": {
                          "xp_awarded": {
                            "type": "boolean"
                          },
                          "last_reward_at": {
                            "type": "string",
                            "nullable": true
                          }
                        },
                        "required": [
                          "xp_awarded",
                          "last_reward_at"
                        ],
                        "additionalProperties": false
                      },
                      "priority": {
                        "type": "string",
                        "enum": [
                          "low",
                          "medium",
                          "high"
                        ]
                      },
                      "weight": {
                        "type": "number"
                      }
                    },
                    "required": [
                      "id",
                      "description",
                      "status",
                      "created_at",
                      "updated_at",
                      "status_history",
                      "rpg"
                    ],
                    "additionalProperties": false
                  }
                },
                "side_quests": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "number"
                      },
                      "description": {
                        "type": "string"
                      },
                      "status": {
                        "type": "string",
                        "enum": [
                          "todo",
                          "in_progress",
                          "blocked",
                          "done"
                        ]
                      },
                      "created_at": {
                        "type": "string"
                      },
                      "updated_at": {
                        "type": "string"
                      },
                      "status_history": {
                        "type": "array",
                        "items": {
                          "type": "object",
                          "properties": {
                            "status": {
                              "type": "string",
                              "enum": [
                                "todo",
                                "in_progress",
                                "blocked",
                                "done"
                              ]
                            },
                            "at": {
                              "type": "string"
                            },
                            "note": {
                              "type": "string",
                              "nullable": true
                            }
                          },
                          "required": [
                            "status",
                            "at",
                            "note"
                          ],
                          "additionalProperties": false
                        }
                      },
                      "completed": {
                        "type": "boolean"
                      },
                      "rpg": {
                        "type": "object",
                        "properties": {
                          "xp_awarded": {
                            "type": "boolean"
                          },
                          "last_reward_at": {
                            "type": "string",
                            "nullable": true
                          }
                        },
                        "required": [
                          "xp_awarded",
                          "last_reward_at"
                        ],
                        "additionalProperties": false
                      },
                      "priority": {
                        "type": "string",
                        "enum": [
                          "low",
                          "medium",
                          "high"
                        ]
                      },
                      "weight": {
                        "type": "number"
                      }
                    },
                    "required": [
                      "id",
                      "description",
                      "status",
                      "created_at",
                      "updated_at",
                      "status_history",
                      "rpg"
                    ],
                    "additionalProperties": false
                  }
                },
                "nextSubtaskId": {
                  "type": "number"
                },
                "due_date": {
                  "type": "string"
                },
                "status": {
                  "type": "string",
                  "enum": [
                    "todo",
                    "in_progress",
                    "blocked",
                    "done"
                  ]
                },
                "order": {
                  "type": "number"
                },
                "created_at": {
                  "type": "string"
                },
                "updated_at": {
                  "type": "string"
                },
                "completed": {
                  "type": "boolean"
                },
                "task_level": {
                  "type": "number"
                },
                "status_history": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "status": {
                        "type": "string",
                        "enum": [
                          "todo",
                          "in_progress",
                          "blocked",
                          "done"
                        ]
                      },
                      "at": {
                        "type": "string"
                      },
                      "note": {
                        "type": "string",
                        "nullable": true
                      }
                    },
                    "required": [
                      "status",
                      "at",
                      "note"
                    ],
                    "additionalProperties": false
                  }
                },
                "rpg": {
                  "type": "object",
                  "properties": {
                    "xp_awarded": {
                      "type": "boolean"
                    },
                    "last_reward_at": {
                      "type": "string",
                      "nullable": true
                    },
                    "history": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "at": {
                            "type": "string"
                          },
                          "amount": {
                            "type": "number"
                          },
                          "reason": {
                            "type": "string"
                          },
                          "subtask_id": {
                            "type": "number"
                          }
                        },
                        "required": [
                          "at",
                          "amount",
                          "reason"
                        ],
                        "additionalProperties": false
                      }
                    }
                  },
                  "required": [
                    "xp_awarded",
                    "last_reward_at",
                    "history"
                  ],
                  "additionalProperties": false
                },
                "campaign_id": {
                  "type": "number",
                  "nullable": true
                },
                "owner_id": {
                  "type": "number"
                },
                "nextId": {
                  "type": "number"
                }
              },
              "required": [
                "id",
                "description",
                "priority",
                "sub_tasks",
                "side_quests",
                "nextSubtaskId",
                "due_date",
                "status",
                "order",
                "created_at",
                "updated_at",
                "task_level",
                "status_history",
                "rpg",
                "campaign_id",
                "owner_id"
              ],
              "additionalProperties": false
            }
          },
          "nextId": {
            "type": "number"
          }
        },
        "required": [
          "tasks",
          "nextId"
        ],
        "additionalProperties": false
      },
      "TaskOrderResponse": {
        "type": "object",
        "properties": {
          "tasks": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "id": {
                  "type": "number"
                },
                "description": {
                  "type": "string"
                },
                "priority": {
                  "type": "string",
                  "enum": [
                    "low",
                    "medium",
                    "high"
                  ]
                },
                "sub_tasks": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "number"
                      },
                      "description": {
                        "type": "string"
                      },
                      "status": {
                        "type": "string",
                        "enum": [
                          "todo",
                          "in_progress",
                          "blocked",
                          "done"
                        ]
                      },
                      "created_at": {
                        "type": "string"
                      },
                      "updated_at": {
                        "type": "string"
                      },
                      "status_history": {
                        "type": "array",
                        "items": {
                          "type": "object",
                          "properties": {
                            "status": {
                              "type": "string",
                              "enum": [
                                "todo",
                                "in_progress",
                                "blocked",
                                "done"
                              ]
                            },
                            "at": {
                              "type": "string"
                            },
                            "note": {
                              "type": "string",
                              "nullable": true
                            }
                          },
                          "required": [
                            "status",
                            "at",
                            "note"
                          ],
                          "additionalProperties": false
                        }
                      },
                      "completed": {
                        "type": "boolean"
                      },
                      "rpg": {
                        "type": "object",
                        "properties": {
                          "xp_awarded": {
                            "type": "boolean"
                          },
                          "last_reward_at": {
                            "type": "string",
                            "nullable": true
                          }
                        },
                        "required": [
                          "xp_awarded",
                          "last_reward_at"
                        ],
                        "additionalProperties": false
                      },
                      "priority": {
                        "type": "string",
                        "enum": [
                          "low",
                          "medium",
                          "high"
                        ]
                      },
                      "weight": {
                        "type": "number"
                      }
                    },
                    "required": [
                      "id",
                      "description",
                      "status",
                      "created_at",
                      "updated_at",
                      "status_history",
                      "rpg"
                    ],
                    "additionalProperties": false
                  }
                },
                "side_quests": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "number"
                      },
                      "description": {
                        "type": "string"
                      },
                      "status": {
                        "type": "string",
                        "enum": [
                          "todo",
                          "in_progress",
                          "blocked",
                          "done"
                        ]
                      },
                      "created_at": {
                        "type": "string"
                      },
                      "updated_at": {
                        "type": "string"
                      },
                      "status_history": {
                        "type": "array",
                        "items": {
                          "type": "object",
                          "properties": {
                            "status": {
                              "type": "string",
                              "enum": [
                                "todo",
                                "in_progress",
                                "blocked",
                                "done"
                              ]
                            },
                            "at": {
                              "type": "string"
                            },
                            "note": {
                              "type": "string",
                              "nullable": true
                            }
                          },
                          "required": [
                            "status",
                            "at",
                            "note"
                          ],
                          "additionalProperties": false
                        }
                      },
                      "completed": {
                        "type": "boolean"
                      },
                      "rpg": {
                        "type": "object",
                        "properties": {
                          "xp_awarded": {
                            "type": "boolean"
                          },
                          "last_reward_at": {
                            "type": "string",
                            "nullable": true
                          }
                        },
                        "required": [
                          "xp_awarded",
                          "last_reward_at"
                        ],
                        "additionalProperties": false
                      },
                      "priority": {
                        "type": "string",
                        "enum": [
                          "low",
                          "medium",
                          "high"
                        ]
                      },
                      "weight": {
                        "type": "number"
                      }
                    },
                    "required": [
                      "id",
                      "description",
                      "status",
                      "created_at",
                      "updated_at",
                      "status_history",
                      "rpg"
                    ],
                    "additionalProperties": false
                  }
                },
                "nextSubtaskId": {
                  "type": "number"
                },
                "due_date": {
                  "type": "string"
                },
                "status": {
                  "type": "string",
                  "enum": [
                    "todo",
                    "in_progress",
                    "blocked",
                    "done"
                  ]
                },
                "order": {
                  "type": "number"
                },
                "created_at": {
                  "type": "string"
                },
                "updated_at": {
                  "type": "string"
                },
                "completed": {
                  "type": "boolean"
                },
                "task_level": {
                  "type": "number"
                },
                "status_history": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "status": {
                        "type": "string",
                        "enum": [
                          "todo",
                          "in_progress",
                          "blocked",
                          "done"
                        ]
                      },
                      "at": {
                        "type": "string"
                      },
                      "note": {
                        "type": "string",
                        "nullable": true
                      }
                    },
                    "required": [
                      "status",
                      "at",
                      "note"
                    ],
                    "additionalProperties": false
                  }
                },
                "rpg": {
                  "type": "object",
                  "properties": {
                    "xp_awarded": {
                      "type": "boolean"
                    },
                    "last_reward_at": {
                      "type": "string",
                      "nullable": true
                    },
                    "history": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "at": {
                            "type": "string"
                          },
                          "amount": {
                            "type": "number"
                          },
                          "reason": {
                            "type": "string"
                          },
                          "subtask_id": {
                            "type": "number"
                          }
                        },
                        "required": [
                          "at",
                          "amount",
                          "reason"
                        ],
                        "additionalProperties": false
                      }
                    }
                  },
                  "required": [
                    "xp_awarded",
                    "last_reward_at",
                    "history"
                  ],
                  "additionalProperties": false
                },
                "campaign_id": {
                  "type": "number",
                  "nullable": true
                },
                "owner_id": {
                  "type": "number"
                },
                "nextId": {
                  "type": "number"
                }
              },
              "required": [
                "id",
                "description",
                "priority",
                "sub_tasks",
                "side_quests",
                "nextSubtaskId",
                "due_date",
                "status",
                "order",
                "created_at",
                "updated_at",
                "task_level",
                "status_history",
                "rpg",
                "campaign_id",
                "owner_id"
              ],
              "additionalProperties": false
            }
          }
        },
        "required": [
          "tasks"
        ],
        "additionalProperties": false
      },
      "TaskHistoryResponse": {
        "type": "object",
        "properties": {
          "history": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "enum": [
                    "todo",
                    "in_progress",
                    "blocked",
                    "done"
                  ]
                },
                "at": {
                  "type": "string"
                },
                "note": {
                  "type": "string",
                  "nullable": true
                }
              },
              "required": [
                "status",
                "at",
                "note"
              ],
              "additionalProperties": false
            }
          }
        },
        "required": [
          "history"
        ],
        "additionalProperties": false
      },
      "Campaign": {
        "type": "object",
        "properties": {
          "id": {
            "type": "number"
          },
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "image_url": {
            "type": "string",
            "nullable": true
          },
          "owner_id": {
            "type": "number"
          },
          "archived": {
            "type": "boolean"
          },
          "created_at": {
            "type": "string"
          },
          "updated_at": {
            "type": "string"
          },
          "stats": {
            "type": "object",
            "properties": {
              "quests_total": {
                "type": "number"
              },
              "quests_completed": {
                "type": "number"
              },
              "quests_remaining": {
                "type": "number"
              },
              "quests_in_progress": {
                "type": "number"
              },
              "completion_percent": {
                "type": "number"
              }
            },
            "required": [
              "quests_total",
              "quests_completed",
              "quests_remaining",
              "quests_in_progress",
              "completion_percent"
            ],
            "additionalProperties": false
          },
          "progress_summary": {
            "type": "string"
          }
        },
        "required": [
          "id",
          "name",
          "description",
          "image_url",
          "owner_id",
          "archived",
          "created_at",
          "updated_at"
        ],
        "additionalProperties": false
      },
      "CampaignListResponse": {
        "type": "object",
        "properties": {
          "campaigns": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "id": {
                  "type": "number"
                },
                "name": {
                  "type": "string"
                },
                "description": {
                  "type": "string"
                },
                "image_url": {
                  "type": "string",
                  "nullable": true
                },
                "owner_id": {
                  "type": "number"
                },
                "archived": {
                  "type": "boolean"
                },
                "created_at": {
                  "type": "string"
                },
                "updated_at": {
                  "type": "string"
                },
                "stats": {
                  "type": "object",
                  "properties": {
                    "quests_total": {
                      "type": "number"
                    },
                    "quests_completed": {
                      "type": "number"
                    },
                    "quests_remaining": {
                      "type": "number"
                    },
                    "quests_in_progress": {
                      "type": "number"
                    },
                    "completion_percent": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "quests_total",
                    "quests_completed",
                    "quests_remaining",
                    "quests_in_progress",
                    "completion_percent"
                  ],
                  "additionalProperties": false
                },
                "progress_summary": {
                  "type": "string"
                }
              },
              "required": [
                "id",
                "name",
                "description",
                "image_url",
                "owner_id",
                "archived",
                "created_at",
                "updated_at"
              ],
              "additionalProperties": false
            }
          }
        },
        "required": [
          "campaigns"
        ],
        "additionalProperties": false
      },
      "CampaignDetailsResponse": {
        "type": "object",
        "properties": {
          "campaign": {
            "type": "object",
            "properties": {
              "id": {
                "type": "number"
              },
              "name": {
                "type": "string"
              },
              "description": {
                "type": "string"
              },
              "image_url": {
                "type": "string",
                "nullable": true
              },
              "owner_id": {
                "type": "number"
              },
              "archived": {
                "type": "boolean"
              },
              "created_at": {
                "type": "string"
              },
              "updated_at": {
                "type": "string"
              },
              "stats": {
                "type": "object",
                "properties": {
                  "quests_total": {
                    "type": "number"
                  },
                  "quests_completed": {
                    "type": "number"
                  },
                  "quests_remaining": {
                    "type": "number"
                  },
                  "quests_in_progress": {
                    "type": "number"
                  },
                  "completion_percent": {
                    "type": "number"
                  }
                },
                "required": [
                  "quests_total",
                  "quests_completed",
                  "quests_remaining",
                  "quests_in_progress",
                  "completion_percent"
                ],
                "additionalProperties": false
              },
              "progress_summary": {
                "type": "string"
              }
            },
            "required": [
              "id",
              "name",
              "description",
              "image_url",
              "owner_id",
              "archived",
              "created_at",
              "updated_at"
            ],
            "additionalProperties": false
          },
          "quests": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "id": {
                  "type": "number"
                },
                "description": {
                  "type": "string"
                },
                "priority": {
                  "type": "string",
                  "enum": [
                    "low",
                    "medium",
                    "high"
                  ]
                },
                "sub_tasks": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "number"
                      },
                      "description": {
                        "type": "string"
                      },
                      "status": {
                        "type": "string",
                        "enum": [
                          "todo",
                          "in_progress",
                          "blocked",
                          "done"
                        ]
                      },
                      "created_at": {
                        "type": "string"
                      },
                      "updated_at": {
                        "type": "string"
                      },
                      "status_history": {
                        "type": "array",
                        "items": {
                          "type": "object",
                          "properties": {
                            "status": {
                              "type": "string",
                              "enum": [
                                "todo",
                                "in_progress",
                                "blocked",
                                "done"
                              ]
                            },
                            "at": {
                              "type": "string"
                            },
                            "note": {
                              "type": "string",
                              "nullable": true
                            }
                          },
                          "required": [
                            "status",
                            "at",
                            "note"
                          ],
                          "additionalProperties": false
                        }
                      },
                      "completed": {
                        "type": "boolean"
                      },
                      "rpg": {
                        "type": "object",
                        "properties": {
                          "xp_awarded": {
                            "type": "boolean"
                          },
                          "last_reward_at": {
                            "type": "string",
                            "nullable": true
                          }
                        },
                        "required": [
                          "xp_awarded",
                          "last_reward_at"
                        ],
                        "additionalProperties": false
                      },
                      "priority": {
                        "type": "string",
                        "enum": [
                          "low",
                          "medium",
                          "high"
                        ]
                      },
                      "weight": {
                        "type": "number"
                      }
                    },
                    "required": [
                      "id",
                      "description",
                      "status",
                      "created_at",
                      "updated_at",
                      "status_history",
                      "rpg"
                    ],
                    "additionalProperties": false
                  }
                },
                "side_quests": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "number"
                      },
                      "description": {
                        "type": "string"
                      },
                      "status": {
                        "type": "string",
                        "enum": [
                          "todo",
                          "in_progress",
                          "blocked",
                          "done"
                        ]
                      },
                      "created_at": {
                        "type": "string"
                      },
                      "updated_at": {
                        "type": "string"
                      },
                      "status_history": {
                        "type": "array",
                        "items": {
                          "type": "object",
                          "properties": {
                            "status": {
                              "type": "string",
                              "enum": [
                                "todo",
                                "in_progress",
                                "blocked",
                                "done"
                              ]
                            },
                            "at": {
                              "type": "string"
                            },
                            "note": {
                              "type": "string",
                              "nullable": true
                            }
                          },
                          "required": [
                            "status",
                            "at",
                            "note"
                          ],
                          "additionalProperties": false
                        }
                      },
                      "completed": {
                        "type": "boolean"
                      },
                      "rpg": {
                        "type": "object",
                        "properties": {
                          "xp_awarded": {
                            "type": "boolean"
                          },
                          "last_reward_at": {
                            "type": "string",
                            "nullable": true
                          }
                        },
                        "required": [
                          "xp_awarded",
                          "last_reward_at"
                        ],
                        "additionalProperties": false
                      },
                      "priority": {
                        "type": "string",
                        "enum": [
                          "low",
                          "medium",
                          "high"
                        ]
                      },
                      "weight": {
                        "type": "number"
                      }
                    },
                    "required": [
                      "id",
                      "description",
                      "status",
                      "created_at",
                      "updated_at",
                      "status_history",
                      "rpg"
                    ],
                    "additionalProperties": false
                  }
                },
                "nextSubtaskId": {
                  "type": "number"
                },
                "due_date": {
                  "type": "string"
                },
                "status": {
                  "type": "string",
                  "enum": [
                    "todo",
                    "in_progress",
                    "blocked",
                    "done"
                  ]
                },
                "order": {
                  "type": "number"
                },
                "created_at": {
                  "type": "string"
                },
                "updated_at": {
                  "type": "string"
                },
                "completed": {
                  "type": "boolean"
                },
                "task_level": {
                  "type": "number"
                },
                "status_history": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "status": {
                        "type": "string",
                        "enum": [
                          "todo",
                          "in_progress",
                          "blocked",
                          "done"
                        ]
                      },
                      "at": {
                        "type": "string"
                      },
                      "note": {
                        "type": "string",
                        "nullable": true
                      }
                    },
                    "required": [
                      "status",
                      "at",
                      "note"
                    ],
                    "additionalProperties": false
                  }
                },
                "rpg": {
                  "type": "object",
                  "properties": {
                    "xp_awarded": {
                      "type": "boolean"
                    },
                    "last_reward_at": {
                      "type": "string",
                      "nullable": true
                    },
                    "history": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "at": {
                            "type": "string"
                          },
                          "amount": {
                            "type": "number"
                          },
                          "reason": {
                            "type": "string"
                          },
                          "subtask_id": {
                            "type": "number"
                          }
                        },
                        "required": [
                          "at",
                          "amount",
                          "reason"
                        ],
                        "additionalProperties": false
                      }
                    }
                  },
                  "required": [
                    "xp_awarded",
                    "last_reward_at",
                    "history"
                  ],
                  "additionalProperties": false
                },
                "campaign_id": {
                  "type": "number",
                  "nullable": true
                },
                "owner_id": {
                  "type": "number"
                },
                "nextId": {
                  "type": "number"
                }
              },
              "required": [
                "id",
                "description",
                "priority",
                "sub_tasks",
                "side_quests",
                "nextSubtaskId",
                "due_date",
                "status",
                "order",
                "created_at",
                "updated_at",
                "task_level",
                "status_history",
                "rpg",
                "campaign_id",
                "owner_id"
              ],
              "additionalProperties": false
            }
          }
        },
        "required": [
          "campaign",
          "quests"
        ],
        "additionalProperties": false
      },
      "SeedTasksResponse": {
        "type": "object",
        "properties": {
          "created": {
            "type": "number"
          },
          "removedBeforeSeed": {
            "type": "number"
          },
          "tasks": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "id": {
                  "type": "number"
                },
                "description": {
                  "type": "string"
                },
                "priority": {
                  "type": "string",
                  "enum": [
                    "low",
                    "medium",
                    "high"
                  ]
                },
                "sub_tasks": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "number"
                      },
                      "description": {
                        "type": "string"
                      },
                      "status": {
                        "type": "string",
                        "enum": [
                          "todo",
                          "in_progress",
                          "blocked",
                          "done"
                        ]
                      },
                      "created_at": {
                        "type": "string"
                      },
                      "updated_at": {
                        "type": "string"
                      },
                      "status_history": {
                        "type": "array",
                        "items": {
                          "type": "object",
                          "properties": {
                            "status": {
                              "type": "string",
                              "enum": [
                                "todo",
                                "in_progress",
                                "blocked",
                                "done"
                              ]
                            },
                            "at": {
                              "type": "string"
                            },
                            "note": {
                              "type": "string",
                              "nullable": true
                            }
                          },
                          "required": [
                            "status",
                            "at",
                            "note"
                          ],
                          "additionalProperties": false
                        }
                      },
                      "completed": {
                        "type": "boolean"
                      },
                      "rpg": {
                        "type": "object",
                        "properties": {
                          "xp_awarded": {
                            "type": "boolean"
                          },
                          "last_reward_at": {
                            "type": "string",
                            "nullable": true
                          }
                        },
                        "required": [
                          "xp_awarded",
                          "last_reward_at"
                        ],
                        "additionalProperties": false
                      },
                      "priority": {
                        "type": "string",
                        "enum": [
                          "low",
                          "medium",
                          "high"
                        ]
                      },
                      "weight": {
                        "type": "number"
                      }
                    },
                    "required": [
                      "id",
                      "description",
                      "status",
                      "created_at",
                      "updated_at",
                      "status_history",
                      "rpg"
                    ],
                    "additionalProperties": false
                  }
                },
                "side_quests": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "number"
                      },
                      "description": {
                        "type": "string"
                      },
                      "status": {
                        "type": "string",
                        "enum": [
                          "todo",
                          "in_progress",
                          "blocked",
                          "done"
                        ]
                      },
                      "created_at": {
                        "type": "string"
                      },
                      "updated_at": {
                        "type": "string"
                      },
                      "status_history": {
                        "type": "array",
                        "items": {
                          "type": "object",
                          "properties": {
                            "status": {
                              "type": "string",
                              "enum": [
                                "todo",
                                "in_progress",
                                "blocked",
                                "done"
                              ]
                            },
                            "at": {
                              "type": "string"
                            },
                            "note": {
                              "type": "string",
                              "nullable": true
                            }
                          },
                          "required": [
                            "status",
                            "at",
                            "note"
                          ],
                          "additionalProperties": false
                        }
                      },
                      "completed": {
                        "type": "boolean"
                      },
                      "rpg": {
                        "type": "object",
                        "properties": {
                          "xp_awarded": {
                            "type": "boolean"
                          },
                          "last_reward_at": {
                            "type": "string",
                            "nullable": true
                          }
                        },
                        "required": [
                          "xp_awarded",
                          "last_reward_at"
                        ],
                        "additionalProperties": false
                      },
                      "priority": {
                        "type": "string",
                        "enum": [
                          "low",
                          "medium",
                          "high"
                        ]
                      },
                      "weight": {
                        "type": "number"
                      }
                    },
                    "required": [
                      "id",
                      "description",
                      "status",
                      "created_at",
                      "updated_at",
                      "status_history",
                      "rpg"
                    ],
                    "additionalProperties": false
                  }
                },
                "nextSubtaskId": {
                  "type": "number"
                },
                "due_date": {
                  "type": "string"
                },
                "status": {
                  "type": "string",
                  "enum": [
                    "todo",
                    "in_progress",
                    "blocked",
                    "done"
                  ]
                },
                "order": {
                  "type": "number"
                },
                "created_at": {
                  "type": "string"
                },
                "updated_at": {
                  "type": "string"
                },
                "completed": {
                  "type": "boolean"
                },
                "task_level": {
                  "type": "number"
                },
                "status_history": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "status": {
                        "type": "string",
                        "enum": [
                          "todo",
                          "in_progress",
                          "blocked",
                          "done"
                        ]
                      },
                      "at": {
                        "type": "string"
                      },
                      "note": {
                        "type": "string",
                        "nullable": true
                      }
                    },
                    "required": [
                      "status",
                      "at",
                      "note"
                    ],
                    "additionalProperties": false
                  }
                },
                "rpg": {
                  "type": "object",
                  "properties": {
                    "xp_awarded": {
                      "type": "boolean"
                    },
                    "last_reward_at": {
                      "type": "string",
                      "nullable": true
                    },
                    "history": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "at": {
                            "type": "string"
                          },
                          "amount": {
                            "type": "number"
                          },
                          "reason": {
                            "type": "string"
                          },
                          "subtask_id": {
                            "type": "number"
                          }
                        },
                        "required": [
                          "at",
                          "amount",
                          "reason"
                        ],
                        "additionalProperties": false
                      }
                    }
                  },
                  "required": [
                    "xp_awarded",
                    "last_reward_at",
                    "history"
                  ],
                  "additionalProperties": false
                },
                "campaign_id": {
                  "type": "number",
                  "nullable": true
                },
                "owner_id": {
                  "type": "number"
                },
                "nextId": {
                  "type": "number"
                }
              },
              "required": [
                "id",
                "description",
                "priority",
                "sub_tasks",
                "side_quests",
                "nextSubtaskId",
                "due_date",
                "status",
                "order",
                "created_at",
                "updated_at",
                "task_level",
                "status_history",
                "rpg",
                "campaign_id",
                "owner_id"
              ],
              "additionalProperties": false
            }
          }
        },
        "required": [
          "created",
          "removedBeforeSeed",
          "tasks"
        ],
        "additionalProperties": false
      },
      "ClearTasksResponse": {
        "type": "object",
        "properties": {
          "removed": {
            "type": "number"
          }
        },
        "required": [
          "removed"
        ],
        "additionalProperties": false
      },
      "XpGrantResponse": {
        "type": "object",
        "properties": {
          "xp_event": {
            "type": "object",
            "properties": {
              "amount": {
                "type": "number"
              },
              "reason": {
                "type": "string",
                "enum": [
                  "task_complete",
                  "subtask_complete",
                  "daily_focus",
                  "debug_adjustment",
                  "xp_gain",
                  "legacy"
                ]
              },
              "message": {
                "type": "string"
              },
              "metadata": {
                "type": "object",
                "additionalProperties": {
                  "oneOf": [
                    {
                      "type": "string"
                    },
                    {
                      "type": "number"
                    },
                    {
                      "type": "boolean"
                    }
                  ],
                  "nullable": true
                }
              },
              "at": {
                "type": "string"
              },
              "level_before": {
                "type": "number"
              },
              "level_after": {
                "type": "number"
              },
              "xp_after": {
                "type": "number"
              },
              "xp_into_level": {
                "type": "number"
              },
              "xp_for_level": {
                "type": "number"
              },
              "xp_to_next": {
                "type": "number"
              },
              "leveled_up": {
                "type": "boolean"
              }
            },
            "required": [
              "amount",
              "reason",
              "message",
              "metadata",
              "at",
              "level_before",
              "level_after",
              "xp_after",
              "xp_into_level",
              "xp_for_level",
              "xp_to_next",
              "leveled_up"
            ],
            "additionalProperties": false
          },
          "player_rpg": {
            "type": "object",
            "properties": {
              "level": {
                "type": "number"
              },
              "xp": {
                "type": "number"
              },
              "xp_into_level": {
                "type": "number"
              },
              "xp_for_level": {
                "type": "number"
              },
              "xp_to_next": {
                "type": "number"
              },
              "xp_progress": {
                "type": "number"
              },
              "streak": {
                "type": "number"
              },
              "last_daily_reward_at": {
                "type": "string",
                "nullable": true
              },
              "last_xp_award_at": {
                "type": "string",
                "nullable": true
              },
              "counters": {
                "type": "object",
                "additionalProperties": {
                  "type": "number"
                }
              },
              "stats": {
                "type": "object",
                "properties": {
                  "hp": {
                    "type": "number"
                  },
                  "mp": {
                    "type": "number"
                  },
                  "coins": {
                    "type": "number"
                  }
                },
                "required": [
                  "hp",
                  "mp",
                  "coins"
                ],
                "additionalProperties": false
              },
              "achievements": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "title": {
                      "type": "string"
                    },
                    "description": {
                      "type": "string"
                    },
                    "unlocked_at": {
                      "type": "string"
                    },
                    "points": {
                      "type": "number"
                    },
                    "tags": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    }
                  },
                  "required": [
                    "title"
                  ],
                  "additionalProperties": false
                }
              },
              "inventory": {
                "type": "object",
                "properties": {
                  "items": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string"
                        },
                        "description": {
                          "type": "string"
                        },
                        "quantity": {
                          "type": "number"
                        },
                        "rarity": {
                          "type": "string",
                          "enum": [
                            "common",
                            "uncommon",
                            "rare",
                            "epic",
                            "legendary",
                            "mythic"
                          ]
                        },
                        "acquired_at": {
                          "type": "string"
                        },
                        "equipped": {
                          "type": "boolean"
                        },
                        "tags": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        }
                      },
                      "required": [
                        "name"
                      ],
                      "additionalProperties": false
                    }
                  }
                },
                "required": [
                  "items"
                ],
                "additionalProperties": false
              },
              "recent_events": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "amount": {
                      "type": "number"
                    },
                    "reason": {
                      "type": "string",
                      "enum": [
                        "task_complete",
                        "subtask_complete",
                        "daily_focus",
                        "debug_adjustment",
                        "xp_gain",
                        "legacy"
                      ]
                    },
                    "message": {
                      "type": "string"
                    },
                    "metadata": {
                      "type": "object",
                      "additionalProperties": {
                        "oneOf": [
                          {
                            "type": "string"
                          },
                          {
                            "type": "number"
                          },
                          {
                            "type": "boolean"
                          }
                        ],
                        "nullable": true
                      }
                    },
                    "at": {
                      "type": "string"
                    },
                    "level_before": {
                      "type": "number"
                    },
                    "level_after": {
                      "type": "number"
                    },
                    "xp_before": {
                      "type": "number"
                    },
                    "xp_after": {
                      "type": "number"
                    },
                    "xp_into_level": {
                      "type": "number"
                    },
                    "xp_for_level": {
                      "type": "number"
                    },
                    "xp_to_next": {
                      "type": "number"
                    },
                    "leveled_up": {
                      "type": "boolean"
                    }
                  },
                  "required": [
                    "amount",
                    "reason",
                    "message",
                    "metadata",
                    "at",
                    "level_before",
                    "level_after",
                    "xp_before",
                    "xp_after",
                    "xp_into_level",
                    "xp_for_level",
                    "xp_to_next",
                    "leveled_up"
                  ],
                  "additionalProperties": false
                }
              }
            },
            "required": [
              "level",
              "xp",
              "xp_into_level",
              "xp_for_level",
              "xp_to_next",
              "xp_progress",
              "streak",
              "last_daily_reward_at",
              "last_xp_award_at",
              "counters",
              "stats",
              "achievements",
              "inventory",
              "recent_events"
            ],
            "additionalProperties": false
          }
        },
        "required": [
          "xp_event",
          "player_rpg"
        ],
        "additionalProperties": false
      },
      "PlayerSnapshotResponse": {
        "type": "object",
        "properties": {
          "player_rpg": {
            "type": "object",
            "properties": {
              "level": {
                "type": "number"
              },
              "xp": {
                "type": "number"
              },
              "xp_into_level": {
                "type": "number"
              },
              "xp_for_level": {
                "type": "number"
              },
              "xp_to_next": {
                "type": "number"
              },
              "xp_progress": {
                "type": "number"
              },
              "streak": {
                "type": "number"
              },
              "last_daily_reward_at": {
                "type": "string",
                "nullable": true
              },
              "last_xp_award_at": {
                "type": "string",
                "nullable": true
              },
              "counters": {
                "type": "object",
                "additionalProperties": {
                  "type": "number"
                }
              },
              "stats": {
                "type": "object",
                "properties": {
                  "hp": {
                    "type": "number"
                  },
                  "mp": {
                    "type": "number"
                  },
                  "coins": {
                    "type": "number"
                  }
                },
                "required": [
                  "hp",
                  "mp",
                  "coins"
                ],
                "additionalProperties": false
              },
              "achievements": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "title": {
                      "type": "string"
                    },
                    "description": {
                      "type": "string"
                    },
                    "unlocked_at": {
                      "type": "string"
                    },
                    "points": {
                      "type": "number"
                    },
                    "tags": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    }
                  },
                  "required": [
                    "title"
                  ],
                  "additionalProperties": false
                }
              },
              "inventory": {
                "type": "object",
                "properties": {
                  "items": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string"
                        },
                        "description": {
                          "type": "string"
                        },
                        "quantity": {
                          "type": "number"
                        },
                        "rarity": {
                          "type": "string",
                          "enum": [
                            "common",
                            "uncommon",
                            "rare",
                            "epic",
                            "legendary",
                            "mythic"
                          ]
                        },
                        "acquired_at": {
                          "type": "string"
                        },
                        "equipped": {
                          "type": "boolean"
                        },
                        "tags": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        }
                      },
                      "required": [
                        "name"
                      ],
                      "additionalProperties": false
                    }
                  }
                },
                "required": [
                  "items"
                ],
                "additionalProperties": false
              },
              "recent_events": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "amount": {
                      "type": "number"
                    },
                    "reason": {
                      "type": "string",
                      "enum": [
                        "task_complete",
                        "subtask_complete",
                        "daily_focus",
                        "debug_adjustment",
                        "xp_gain",
                        "legacy"
                      ]
                    },
                    "message": {
                      "type": "string"
                    },
                    "metadata": {
                      "type": "object",
                      "additionalProperties": {
                        "oneOf": [
                          {
                            "type": "string"
                          },
                          {
                            "type": "number"
                          },
                          {
                            "type": "boolean"
                          }
                        ],
                        "nullable": true
                      }
                    },
                    "at": {
                      "type": "string"
                    },
                    "level_before": {
                      "type": "number"
                    },
                    "level_after": {
                      "type": "number"
                    },
                    "xp_before": {
                      "type": "number"
                    },
                    "xp_after": {
                      "type": "number"
                    },
                    "xp_into_level": {
                      "type": "number"
                    },
                    "xp_for_level": {
                      "type": "number"
                    },
                    "xp_to_next": {
                      "type": "number"
                    },
                    "leveled_up": {
                      "type": "boolean"
                    }
                  },
                  "required": [
                    "amount",
                    "reason",
                    "message",
                    "metadata",
                    "at",
                    "level_before",
                    "level_after",
                    "xp_before",
                    "xp_after",
                    "xp_into_level",
                    "xp_for_level",
                    "xp_to_next",
                    "leveled_up"
                  ],
                  "additionalProperties": false
                }
              }
            },
            "required": [
              "level",
              "xp",
              "xp_into_level",
              "xp_for_level",
              "xp_to_next",
              "xp_progress",
              "streak",
              "last_daily_reward_at",
              "last_xp_award_at",
              "counters",
              "stats",
              "achievements",
              "inventory",
              "recent_events"
            ],
            "additionalProperties": false
          }
        },
        "required": [
          "player_rpg"
        ],
        "additionalProperties": false
      },
      "RegisterUserRequest": {
        "type": "object",
        "properties": {
          "username": {
            "type": "string",
            "minLength": 1
          },
          "password": {
            "type": "string",
            "minLength": 6
          },
          "email": {
            "type": "string",
            "format": "email",
            "nullable": true
          },
          "profile": {
            "type": "object",
            "properties": {
              "display_name": {
                "type": "string",
                "minLength": 1,
                "maxLength": 100
              },
              "avatar": {
                "type": "string",
                "minLength": 1,
                "maxLength": 2048,
                "nullable": true
              },
              "class": {
                "type": "string",
                "enum": [
                  "adventurer",
                  "warrior",
                  "mage",
                  "rogue"
                ]
              },
              "bio": {
                "type": "string",
                "maxLength": 200
              },
              "prefs": {
                "type": "object",
                "additionalProperties": {}
              }
            },
            "additionalProperties": false
          }
        },
        "required": [
          "username",
          "password"
        ],
        "additionalProperties": false
      },
      "LoginRequest": {
        "type": "object",
        "properties": {
          "username": {
            "type": "string",
            "minLength": 1
          },
          "password": {
            "type": "string",
            "minLength": 1
          }
        },
        "required": [
          "username",
          "password"
        ],
        "additionalProperties": false
      },
      "ProfileUpdateRequest": {
        "type": "object",
        "properties": {
          "display_name": {
            "type": "string",
            "minLength": 1,
            "maxLength": 100
          },
          "avatar": {
            "type": "string",
            "minLength": 1,
            "maxLength": 2048,
            "nullable": true
          },
          "class": {
            "type": "string",
            "enum": [
              "adventurer",
              "warrior",
              "mage",
              "rogue"
            ]
          },
          "bio": {
            "type": "string",
            "maxLength": 200
          },
          "prefs": {
            "type": "object",
            "additionalProperties": {}
          }
        },
        "additionalProperties": false
      },
      "EmailValidationRequest": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "minLength": 1
          }
        },
        "required": [
          "email"
        ],
        "additionalProperties": false
      },
      "CreateTaskRequest": {
        "type": "object",
        "properties": {
          "description": {
            "type": "string",
            "minLength": 1
          },
          "priority": {
            "type": "string",
            "enum": [
              "low",
              "medium",
              "high"
            ]
          },
          "due_date": {
            "type": "string"
          },
          "task_level": {
            "type": "number",
            "minimum": 0,
            "exclusiveMinimum": true,
            "maximum": 99
          },
          "campaign_id": {
            "type": "integer",
            "minimum": 0,
            "exclusiveMinimum": true,
            "nullable": true
          }
        },
        "required": [
          "description"
        ],
        "additionalProperties": false
      },
      "CreateSubtaskRequest": {
        "type": "object",
        "properties": {
          "description": {
            "type": "string",
            "minLength": 1
          }
        },
        "required": [
          "description"
        ],
        "additionalProperties": false
      },
      "UpdateStatusRequest": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string",
            "enum": [
              "todo",
              "in_progress",
              "blocked",
              "done"
            ]
          },
          "note": {
            "type": "string",
            "nullable": true
          }
        },
        "required": [
          "status"
        ],
        "additionalProperties": false
      },
      "UpdateTaskRequest": {
        "type": "object",
        "properties": {
          "description": {
            "type": "string",
            "minLength": 1
          },
          "priority": {
            "type": "string",
            "minLength": 1
          },
          "due_date": {
            "type": "string",
            "nullable": true
          },
          "task_level": {
            "type": "number",
            "minimum": 0,
            "exclusiveMinimum": true,
            "maximum": 99
          },
          "campaign_id": {
            "type": "integer",
            "minimum": 0,
            "exclusiveMinimum": true,
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "UpdateSubtaskRequest": {
        "type": "object",
        "properties": {
          "description": {
            "type": "string",
            "minLength": 1
          },
          "status": {
            "type": "string",
            "minLength": 1
          },
          "weight": {
            "type": "number"
          },
          "priority": {
            "type": "string",
            "minLength": 1
          }
        },
        "additionalProperties": false
      },
      "UpdateOrderRequest": {
        "type": "object",
        "properties": {
          "order": {
            "type": "array",
            "items": {
              "type": "integer",
              "minimum": 0
            }
          }
        },
        "required": [
          "order"
        ],
        "additionalProperties": false
      },
      "CreateCampaignRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "minLength": 1
          },
          "description": {
            "type": "string",
            "maxLength": 2000
          },
          "image_url": {
            "type": "string",
            "maxLength": 2048,
            "nullable": true
          }
        },
        "required": [
          "name"
        ],
        "additionalProperties": false
      },
      "UpdateCampaignRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "minLength": 1
          },
          "description": {
            "type": "string",
            "maxLength": 2000
          },
          "image_url": {
            "type": "string",
            "maxLength": 2048,
            "nullable": true
          },
          "archived": {
            "type": "boolean"
          }
        },
        "additionalProperties": false
      },
      "GrantXpRequest": {
        "type": "object",
        "properties": {
          "amount": {
            "type": "number"
          }
        },
        "required": [
          "amount"
        ],
        "additionalProperties": false
      },
      "SeedTasksRequest": {
        "type": "object",
        "properties": {
          "count": {
            "oneOf": [
              {
                "type": "number"
              },
              {
                "type": "string"
              }
            ],
            "nullable": true
          }
        },
        "additionalProperties": false
      }
    }
  },
  "paths": {
    "/api/users/register": {
      "post": {
        "tags": [
          "Users"
        ],
        "summary": "Register a new user",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RegisterUserRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "User registered successfully.",
            "headers": {
              "X-RateLimit-Limit": {
                "schema": {
                  "type": "integer",
                  "minimum": 0
                },
                "description": "Maximum number of allowed requests within the window."
              },
              "X-RateLimit-Remaining": {
                "schema": {
                  "type": "integer",
                  "minimum": 0
                },
                "description": "Remaining attempts available in the current window."
              },
              "Retry-After": {
                "schema": {
                  "type": "integer",
                  "minimum": 1
                },
                "description": "Seconds until the limit resets (only sent when rate limited)."
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthSuccessResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid registration payload.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded.",
            "headers": {
              "X-RateLimit-Limit": {
                "schema": {
                  "type": "integer",
                  "minimum": 0
                },
                "description": "Maximum number of allowed requests within the window."
              },
              "X-RateLimit-Remaining": {
                "schema": {
                  "type": "integer",
                  "minimum": 0
                },
                "description": "Remaining attempts available in the current window."
              },
              "Retry-After": {
                "schema": {
                  "type": "integer",
                  "minimum": 1
                },
                "description": "Seconds until the limit resets (only sent when rate limited)."
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/users/login": {
      "post": {
        "tags": [
          "Users"
        ],
        "summary": "Authenticate a user session",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LoginRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Authentication succeeded.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthSuccessResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid credentials payload.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication failed.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/users/validate-email": {
      "post": {
        "tags": [
          "Users"
        ],
        "summary": "Validate email address formatting",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/EmailValidationRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Validation result.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EmailValidationResponse"
                }
              }
            }
          },
          "400": {
            "description": "Malformed request body.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/users/check-username/{username}": {
      "get": {
        "tags": [
          "Users"
        ],
        "summary": "Check username availability",
        "parameters": [
          {
            "name": "username",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "minLength": 1
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Availability result.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UsernameAvailabilityResponse"
                }
              }
            }
          },
          "400": {
            "description": "Missing or invalid username.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/users/me": {
      "get": {
        "tags": [
          "Users"
        ],
        "summary": "Retrieve the currently authenticated user",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Current user details.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CurrentUserResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "User not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Users"
        ],
        "summary": "Update the authenticated user profile",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProfileUpdateRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Updated profile.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CurrentUserResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation failed.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "User not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/tasks": {
      "get": {
        "tags": [
          "Tasks"
        ],
        "summary": "List tasks for the authenticated user",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "campaign_id",
            "in": "query",
            "required": false,
            "schema": {
              "oneOf": [
                {
                  "type": "integer",
                  "minimum": 1
                },
                {
                  "type": "string",
                  "enum": [
                    "none",
                    "null"
                  ]
                }
              ]
            },
            "description": "Filter tasks by campaign id or \"null\"/\"none\" for unassigned tasks."
          }
        ],
        "responses": {
          "200": {
            "description": "Task list response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TaskListResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid query parameter.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Tasks"
        ],
        "summary": "Create a new task",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateTaskRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Task created.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Task"
                }
              }
            }
          },
          "400": {
            "description": "Invalid task payload.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Referenced campaign not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/tasks/{id}": {
      "put": {
        "tags": [
          "Tasks"
        ],
        "summary": "Update an existing task",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateTaskRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Updated task.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Task"
                }
              }
            }
          },
          "400": {
            "description": "Validation failed.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Task not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Tasks"
        ],
        "summary": "Delete a task",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Task deleted."
          },
          "400": {
            "description": "Invalid task id.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Task not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/tasks/{id}/subtasks": {
      "post": {
        "tags": [
          "Tasks"
        ],
        "summary": "Create a subtask",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateSubtaskRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Subtask created.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Task"
                }
              }
            }
          },
          "400": {
            "description": "Invalid subtask payload.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Task not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/tasks/{id}/status": {
      "patch": {
        "tags": [
          "Tasks"
        ],
        "summary": "Update the status of a task",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateStatusRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Task updated.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TaskWithProgress"
                }
              }
            }
          },
          "400": {
            "description": "Invalid status payload.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Task not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/tasks/{id}/history": {
      "get": {
        "tags": [
          "Tasks"
        ],
        "summary": "Retrieve the status history for a task",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Status history.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TaskHistoryResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid task id.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Task not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/tasks/{id}/subtasks/{subtask_id}": {
      "put": {
        "tags": [
          "Tasks"
        ],
        "summary": "Update a subtask",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true
            }
          },
          {
            "name": "subtask_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "minimum": 1
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateSubtaskRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Updated task response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Task"
                }
              }
            }
          },
          "400": {
            "description": "Validation failed.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Task or subtask not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Tasks"
        ],
        "summary": "Delete a subtask",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true
            }
          },
          {
            "name": "subtask_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "minimum": 1
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Subtask deleted."
          },
          "400": {
            "description": "Invalid identifier.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Task or subtask not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/tasks/{id}/subtasks/{subtask_id}/status": {
      "patch": {
        "tags": [
          "Tasks"
        ],
        "summary": "Update a subtask status",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true
            }
          },
          {
            "name": "subtask_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "minimum": 1
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateStatusRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Updated task including recent XP changes.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TaskWithProgress"
                }
              }
            }
          },
          "400": {
            "description": "Invalid payload.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Task or subtask not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/tasks/order": {
      "put": {
        "tags": [
          "Tasks"
        ],
        "summary": "Update task ordering",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateOrderRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Sorted task list.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TaskOrderResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request payload.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/campaigns": {
      "get": {
        "tags": [
          "Campaigns"
        ],
        "summary": "List campaigns with summary stats",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "include_archived",
            "in": "query",
            "required": false,
            "schema": {
              "oneOf": [
                {
                  "type": "string"
                },
                {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              ]
            },
            "description": "Include archived campaigns when set to \"true\". Accepts either a single string or repeated query parameters."
          }
        ],
        "responses": {
          "200": {
            "description": "Campaign list.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CampaignListResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid query parameter.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Campaigns"
        ],
        "summary": "Create a campaign",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateCampaignRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Campaign created.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Campaign"
                }
              }
            }
          },
          "400": {
            "description": "Invalid payload.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/campaigns/{id}": {
      "get": {
        "tags": [
          "Campaigns"
        ],
        "summary": "Get campaign details including quests",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Campaign details.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CampaignDetailsResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid campaign id.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Campaign not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "Campaigns"
        ],
        "summary": "Update a campaign",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateCampaignRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Updated campaign.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Campaign"
                }
              }
            }
          },
          "400": {
            "description": "Invalid payload.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Campaign not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Campaigns"
        ],
        "summary": "Delete a campaign",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Campaign removed."
          },
          "400": {
            "description": "Invalid campaign id.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Campaign not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/rpg/daily-reward": {
      "post": {
        "tags": [
          "RPG"
        ],
        "summary": "Claim the daily reward",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Reward granted.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/XpGrantResponse"
                }
              }
            }
          },
          "400": {
            "description": "Reward already claimed or unavailable.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "User not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/rpg/grant-xp": {
      "post": {
        "tags": [
          "RPG"
        ],
        "summary": "Adjust XP directly",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GrantXpRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "XP adjusted.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/XpGrantResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid adjustment payload.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "User not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/rpg/reset": {
      "post": {
        "tags": [
          "RPG"
        ],
        "summary": "Reset RPG state",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "RPG state reset.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PlayerSnapshotResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "User not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/debug/clear-tasks": {
      "post": {
        "tags": [
          "Debug"
        ],
        "summary": "Remove all tasks for the current user",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Tasks removed.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ClearTasksResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/debug/seed-tasks": {
      "post": {
        "tags": [
          "Debug"
        ],
        "summary": "Seed demo tasks for the current user",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SeedTasksRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Demo tasks created.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SeedTasksResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid seed payload.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/debug/grant-xp": {
      "post": {
        "tags": [
          "Debug"
        ],
        "summary": "Grant XP via debug endpoint",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GrantXpRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "XP granted.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/XpGrantResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid payload.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "User not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/debug/reset-rpg": {
      "post": {
        "tags": [
          "Debug"
        ],
        "summary": "Reset RPG state via debug",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "RPG state reset.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PlayerSnapshotResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "User not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    }
  }
}
